{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Calendar from \"./newQueue\";\nimport { Entypo, MaterialIcons, FontAwesome5, Ionicons } from '@expo/vector-icons';\nimport client from \"../api/client\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { UserContext } from \"../contexts/userContexts\";\nimport { StyledContainer } from \"./../components/styles\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar days = {\n  0: \"ראשון\",\n  1: \"שני\",\n  2: \"שלישי\",\n  3: \"רביעי\",\n  4: \"חמישי\",\n  5: \"שישי\",\n  6: \"שבת\"\n};\nexport default function MyQueues(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      queues = _useState2[0],\n      setQueues = _useState2[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user,\n      Logout = _useContext.Logout;\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      thinking = _useState4[0],\n      setThinking = _useState4[1];\n\n  var Queue = function Queue(_ref2) {\n    var item = _ref2.item;\n\n    var showAlert = function showAlert() {\n      Alert.alert('ביטול תור', 'האם את בטוחה שאת רוצה לבטל את התור?', [{\n        text: 'לא'\n      }, {\n        text: 'כן',\n        onPress: function onPress() {\n          return deleteQueue(item._id);\n        }\n      }]);\n    };\n\n    var theTime = new Date(item.time);\n    return _jsxs(View, {\n      style: {\n        height: 140,\n        display: \"flex\",\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: \"space-between\",\n        shadowOffset: {\n          width: 2,\n          height: 2\n        },\n        shadowColor: \"black\",\n        elevation: 8,\n        backgroundColor: \"white\",\n        shadowOpacity: 3,\n        borderRadius: 20,\n        padding: 3,\n        marginHorizontal: 20,\n        marginVertical: 5\n      },\n      children: [_jsxs(View, {\n        style: {\n          marginTop: 30,\n          display: 'flex',\n          flexDirection: 'row',\n          alignContent: 'flex-start',\n          justifyContent: \"center\"\n        },\n        children: [_jsxs(Text, {\n          style: {\n            textAlign: 'right',\n            fontSize: 15\n          },\n          children: [\"\\u05D1\\u05E9\\u05E2\\u05D4 \", theTime.getUTCHours(), \":00\"]\n        }), _jsx(Text, {\n          children: \" \"\n        }), _jsxs(Text, {\n          style: {\n            textAlign: 'right',\n            fontSize: 15\n          },\n          children: [\"\\u05D9\\u05D5\\u05DD \", days[theTime.getDay()], \" \", theTime.getDate(), \"/\", theTime.getMonth() + 1]\n        })]\n      }), _jsx(View, {\n        children: _jsx(Pressable, {\n          style: [styles.button, styles.buttonOpen],\n          onPress: function onPress() {\n            return showAlert();\n          },\n          children: _jsx(Text, {\n            style: {\n              fontSize: 14\n            },\n            children: \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC \\u05D4\\u05EA\\u05D5\\u05E8\"\n          })\n        })\n      })]\n    });\n  };\n\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setThinking(true);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(client.post('/events/getMyQueue', {\n              \"user\": user\n            }, {\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }).then(function (response) {\n              setQueues(response.data);\n              setThinking(false);\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n\n  var deleteQueue = function deleteQueue(id) {\n    return _regeneratorRuntime.async(function deleteQueue$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(client.post(\"/events/deleteQueue\", {\n              'user': user,\n              'id': id\n            }, {\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }).then(function (response) {\n              setQueues(response.data);\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var logout = function logout() {\n    return _regeneratorRuntime.async(function logout$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem('token'));\n\n          case 3:\n            Logout();\n            navigation.navigate('Login');\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var showAlertSignOut = function showAlertSignOut() {\n    console.log(\"http://192.168.1.22:3000\");\n    Alert.alert('התנתקות', 'האם את בטוחה שאת רוצה להתנתק?', [{\n      text: 'כן',\n      onPress: function onPress() {\n        return logout();\n      }\n    }, {\n      text: 'ביטול'\n    }]);\n  };\n\n  return _jsxs(StyledContainer, {\n    children: [_jsx(View, {\n      style: {\n        height: 100,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        backgroundColor: \"#a3c6ff\"\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 19\n        },\n        children: \"\\u05D4\\u05EA\\u05D5\\u05E8\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA:\"\n      })\n    }), _jsx(View, {\n      style: {\n        height: 460,\n        borderRadius: 50,\n        position: \"relative\"\n      },\n      children: _jsx(FlatList, {\n        data: queues,\n        renderItem: function renderItem(_ref3) {\n          var item = _ref3.item;\n          return _jsx(Queue, {\n            item: item\n          });\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item._id;\n        }\n      })\n    }), _jsx(View, {\n      style: \"marginTop: 70\",\n      children: _jsx(Calendar, {})\n    }), _jsx(View, {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignContent: 'center'\n      },\n      children: _jsx(View, {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: _jsxs(View, {\n          style: styles.menuNavigator,\n          children: [_jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return navigation.navigate(\"Welcome\");\n            },\n            children: _jsx(Ionicons, {\n              name: \"home-outline\",\n              size: 30,\n              color: \"black\"\n            })\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return navigation.navigate(\"MyQueues\");\n            },\n            children: _jsx(MaterialIcons, {\n              name: \"playlist-add-check\",\n              size: 35,\n              color: \"black\"\n            })\n          }), _jsx(TouchableOpacity, {\n            onPress: 'https://ul.waze.com/ul?ll=31.24937992%2C34.78982806&navigate=yes&utm_campaign=default&utm_source=waze_website&utm_medium=lm_share_location',\n            children: _jsx(FontAwesome5, {\n              name: \"waze\",\n              size: 29,\n              color: \"black\"\n            })\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return showAlertSignOut();\n            },\n            children: _jsx(Entypo, {\n              name: \"log-out\",\n              size: 29,\n              color: \"black\"\n            })\n          })]\n        })\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  linearGradient: {\n    flex: 1,\n    paddingLeft: 15,\n    paddingRight: 15,\n    borderRadius: 5,\n    backgroundColor: \"white\",\n    display: \"flex\",\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    height: 90,\n    marginLeft: 3,\n    marginRight: 3,\n    marginVertical: 2\n  },\n  menuNavigator: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: '#f2f2f2',\n    width: '95%',\n    height: 70,\n    borderRadius: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.5,\n    shadowRadius: 2,\n    elevation: 2,\n    paddingHorizontal: 18\n  },\n  queues: {\n    borderWidth: 1,\n    borderColor: \"black\",\n    backgroundColor: \"white\",\n    borderRadius: 10,\n    display: \"flex\",\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    height: 90,\n    marginLeft: 3,\n    marginRight: 3,\n    marginVertical: 2\n  },\n  button: {\n    backgroundColor: '#a3c6ff',\n    borderRadius: 15,\n    padding: 4,\n    width: 140,\n    alignItems: 'center',\n    justifyContent: \"center\",\n    elevation: 8,\n    marginVertical: 24,\n    height: 30\n  },\n  buttons: {\n    height: 50,\n    backgroundColor: '#f1f1f1',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 85,\n    width: \"100%\",\n    display: 'flex',\n    flexDirection: 'row'\n  }\n});","map":{"version":3,"sources":["C:/Users/hay12/OneDrive/שולחן העבודה/the/client/screens/myQueues.js"],"names":["React","useEffect","useState","useContext","Calendar","Entypo","MaterialIcons","FontAwesome5","Ionicons","client","AsyncStorage","UserContext","StyledContainer","LinearGradient","days","MyQueues","navigation","queues","setQueues","user","Logout","thinking","setThinking","Queue","item","showAlert","Alert","alert","text","onPress","deleteQueue","_id","theTime","Date","time","height","display","flexDirection","alignItems","justifyContent","shadowOffset","width","shadowColor","elevation","backgroundColor","shadowOpacity","borderRadius","padding","marginHorizontal","marginVertical","marginTop","alignContent","textAlign","fontSize","getUTCHours","getDay","getDate","getMonth","styles","button","buttonOpen","post","headers","then","response","data","catch","err","console","log","id","logout","removeItem","navigate","showAlertSignOut","position","menuNavigator","StyleSheet","create","linearGradient","flex","paddingLeft","paddingRight","marginLeft","marginRight","shadowRadius","paddingHorizontal","borderWidth","borderColor","buttons"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { StyleSheet, View ,Button, Pressable, FlatList, TouchableOpacity, Alert, ActivityIndicator, Modal, Text} from 'react-native';\r\nimport Calendar from './newQueue';\r\nimport { Entypo, MaterialIcons, FontAwesome5, Ionicons } from '@expo/vector-icons';\r\nimport client from '../api/client';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { UserContext } from '../contexts/userContexts';\r\nimport { StyledContainer } from './../components/styles'\r\nimport {LinearGradient} from 'expo-linear-gradient';\r\nimport {API, ADMIN_ID} from '@env';\r\n\r\nconst days = {  0: \"ראשון\",\r\n                1: \"שני\", \r\n                2:\"שלישי\", \r\n                3: \"רביעי\",\r\n                4: \"חמישי\", \r\n                5: \"שישי\", \r\n                6: \"שבת\"\r\n            };\r\n            \r\n            \r\nexport default function MyQueues({navigation}) {\r\n    const [queues, setQueues] = useState({});\r\n    const {user, Logout} = useContext(UserContext);\r\n    const [thinking, setThinking] = useState(false);\r\n\r\n    // \r\n    const Queue = ({item}) => {\r\n        const showAlert = () => {\r\n            Alert.alert('ביטול תור', \r\n                        'האם את בטוחה שאת רוצה לבטל את התור?',\r\n                        [{text:'לא'},\r\n                        {text:'כן', onPress: ()=> deleteQueue(item._id)}])\r\n        }\r\n        let theTime = new Date(item.time)\r\n        return (\r\n\r\n            <View style={{height: 140, display: \"flex\", flexDirection: 'column', alignItems: 'center',justifyContent:\"space-between\", \r\n            shadowOffset: {\r\n              width: 2,\r\n              height: 2\r\n            }\r\n            ,shadowColor: \"black\", elevation : 8, backgroundColor: \"white\" ,shadowOpacity: 3,borderRadius: 20, padding: 3, marginHorizontal: 20, marginVertical: 5, }}>\r\n\r\n                <View style={{ marginTop: 30,display: 'flex', flexDirection: 'row', alignContent: 'flex-start',justifyContent:\"center\"}}>\r\n                    <Text style={{textAlign: 'right',fontSize: 15}}>\r\n                        בשעה {theTime.getUTCHours()}:00 \r\n                    </Text>\r\n                    <Text> </Text>\r\n                    <Text style={{textAlign: 'right',fontSize: 15}}>\r\n                        יום {days[theTime.getDay()]} {theTime.getDate()}/{theTime.getMonth() + 1} \r\n                    </Text>\r\n                </View>\r\n                <View>\r\n                    <Pressable style={[styles.button, styles.buttonOpen]} onPress={() => showAlert()} >\r\n                        <Text style={{fontSize: 14}}>ביטול התור</Text>\r\n                    </Pressable>\r\n                </View>\r\n            </View>\r\n            )\r\n        }\r\n                \r\n    useEffect(async () => {\r\n        setThinking(true);\r\n        await client.post('/events/getMyQueue', {\"user\" : user}, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((response) => {\r\n                setQueues(response.data);\r\n                setThinking(false);\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            })\r\n    }, [])\r\n\r\n    const deleteQueue = async (id) =>{\r\n        await client.post(\"/events/deleteQueue\", {'user' : user, 'id': id}, \r\n        { headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .then((response) =>{\r\n            setQueues(response.data)\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    const logout = async () => {\r\n        try {\r\n            await AsyncStorage.removeItem('token');\r\n            Logout();\r\n            navigation.navigate('Login');\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n\r\n    // Sign Out Alert\r\n    const showAlertSignOut = () => {\r\n                    console.log(API);\r\n                        Alert.alert('התנתקות', \r\n                                    'האם את בטוחה שאת רוצה להתנתק?',\r\n                                    [{text:'כן', onPress: ()=> logout()},\r\n                                    {text:'ביטול'}])\r\n                    }\r\n\r\n    return (\r\n        <StyledContainer >\r\n            <View style={{height: 100, display: \"flex\",justifyContent:\"center\", alignItems:\"center\", backgroundColor:\"#a3c6ff\"}}>\r\n                <Text style={{fontSize:19}}>התורים שלך:</Text>\r\n            </View>\r\n            <View style={{height: 460, borderRadius: 50, position: \"relative\"}}>\r\n                <FlatList\r\n                    data={queues}\r\n                    renderItem={({ item }) => <Queue item={item} />}\r\n                    keyExtractor={item => item._id}              \r\n                />\r\n            </View>\r\n            \r\n\r\n\r\n            {/* Calendar model */}\r\n            <View style={\"marginTop: 70\"}>\r\n                <Calendar/>\r\n            </View>\r\n            {/* Calendar model */}\r\n\r\n            {/* Navigation Bar */}\r\n            <View style={{display: 'flex',justifyContent: 'center', alignContent: 'center'}}>        \r\n                <View style={{display: 'flex', alignItems: 'center'}}>\r\n                    <View style={ styles.menuNavigator }>\r\n\r\n                        <TouchableOpacity onPress={() => navigation.navigate(\"Welcome\")}>\r\n                            <Ionicons name=\"home-outline\" size={30} color=\"black\" />\r\n                        </TouchableOpacity>\r\n\r\n                        <TouchableOpacity onPress={() => navigation.navigate(\"MyQueues\")}>\r\n                            <MaterialIcons name=\"playlist-add-check\" size={35} color=\"black\" />\r\n                        </TouchableOpacity>\r\n\r\n                        <TouchableOpacity onPress={'https://ul.waze.com/ul?ll=31.24937992%2C34.78982806&navigate=yes&utm_campaign=default&utm_source=waze_website&utm_medium=lm_share_location'}>\r\n                            <FontAwesome5 name=\"waze\" size={29} color=\"black\" />\r\n                        </TouchableOpacity>\r\n\r\n                        <TouchableOpacity onPress={() => showAlertSignOut()}>\r\n                            <Entypo name=\"log-out\" size={29} color=\"black\" />\r\n                        </TouchableOpacity>\r\n\r\n                    </View>\r\n                </View>\r\n            </View>\r\n            {/* Navigation Bar */}\r\n\r\n        </StyledContainer>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    linearGradient: {\r\n        flex: 1,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        borderRadius: 5,\r\n        \r\n        backgroundColor: \"white\",\r\n        display: \"flex\",\r\n        flexDirection: 'row',\r\n        justifyContent:'space-around',\r\n        alignItems: 'center',\r\n        height:90,\r\n        marginLeft: 3,\r\n        marginRight: 3,\r\n        marginVertical: 2\r\n    },\r\n    menuNavigator: {\r\n        display: 'flex',\r\n        flexDirection: 'row', \r\n        justifyContent:'space-between', \r\n        alignItems:'center', \r\n        backgroundColor: '#f2f2f2', \r\n        width: '95%',height:70,\r\n        borderRadius:15,   \r\n        shadowColor: '#000',\r\n        shadowOffset: { width: 0, height: 2 },\r\n        shadowOpacity: 0.5,\r\n        shadowRadius: 2,\r\n        elevation: 2,\r\n        paddingHorizontal: 18\r\n    },\r\n    queues: {     \r\n        borderWidth: 1,\r\n        borderColor: \"black\",\r\n        backgroundColor: \"white\",\r\n        borderRadius:10,\r\n        display: \"flex\",\r\n        flexDirection: 'row',\r\n        justifyContent:'space-around',\r\n        alignItems: 'center',\r\n        height:90,\r\n        marginLeft: 3,\r\n        marginRight: 3,\r\n        marginVertical: 2\r\n    },\r\n    button: {\r\n        backgroundColor: '#a3c6ff',\r\n        borderRadius: 15,\r\n        padding: 4,\r\n        width: 140,\r\n        alignItems:'center',\r\n        justifyContent: \"center\",  \r\n        elevation: 8,\r\n        marginVertical:24,\r\n        height: 30,\r\n        \r\n    },\r\n    buttons: {\r\n       height: 50,\r\n       backgroundColor: '#f1f1f1',\r\n       alignItems: 'center',\r\n       justifyContent: 'center',\r\n       marginTop: 85,\r\n       width: \"100%\",\r\n       display: 'flex',\r\n       flexDirection: 'row'\r\n   }\r\n});"]},"metadata":{},"sourceType":"module"}