{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, useContext, useRef } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport CalendarPicker from 'react-native-calendar-picker';\nimport client from \"../api/client\";\nimport { FontAwesome } from '@expo/vector-icons';\nimport { UserContext } from \"../contexts/userContexts\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Calendar(navigation) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      thinking = _useState2[0],\n      setThinking = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      indicator = _useState4[0],\n      setIndicator = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      toApear = _useState6[0],\n      SetApearence = _useState6[1];\n\n  var _useState7 = useState(new Date()),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedDate = _useState8[0],\n      setSelectedDate = _useState8[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      visible = _useState10[0],\n      setVisible = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      massage = _useState12[0],\n      setMassage = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      catchH = _useState14[0],\n      setCatchH = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      choousenHour = _useState16[0],\n      setChoosenHour = _useState16[1];\n\n  var _useState17 = useState([{\n    hour: 9,\n    key: '1',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 10,\n    key: '2',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 11,\n    key: '3',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 12,\n    key: '4',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 13,\n    key: '11',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 14,\n    key: '12',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 15,\n    key: '5',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 16,\n    key: '6',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 17,\n    key: '7',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 18,\n    key: '8',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 19,\n    key: '9',\n    color: '#d3ffa3',\n    iscatched: false\n  }, {\n    hour: 20,\n    key: '10',\n    color: '#d3ffa3',\n    iscatched: false\n  }]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      hours = _useState18[0],\n      setHours = _useState18[1];\n\n  var addQueue = function addQueue() {\n    return _regeneratorRuntime.async(function addQueue$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setThinking(true);\n            console.log(\"6242421cf1e2c1a611028de9\");\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(client.post('/events/addQueue', {\n              'user': user,\n              'time': selectedDate,\n              'hour': choousenHour,\n              'admin': \"6242421cf1e2c1a611028de9\"\n            }, {\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }).then(function (response) {\n              setThinking(false);\n              setMassage(false);\n              setIndicator(!indicator);\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function visi() {\n    SetApearence(!toApear);\n  }\n\n  ;\n\n  var onDateChange = function onDateChange(date) {\n    var a;\n    return _regeneratorRuntime.async(function onDateChange$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            a = new Date(date);\n            setSelectedDate(a);\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setThinking(true);\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(client.post('/events/getDayQueues', {\n              \"date\": selectedDate\n            }, {\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }).then(function (response) {\n              setThinking(false);\n              setCatchH(response.data.events);\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [selectedDate, indicator]);\n  return _jsxs(View, {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignContent: 'center'\n    },\n    children: [_jsx(TouchableOpacity, {\n      activeOpacity: 0.1,\n      onPress: function onPress() {\n        return visi(!visible);\n      },\n      style: styles.touchi,\n      children: _jsx(FontAwesome, {\n        name: \"plus\",\n        size: 32,\n        color: \"white\"\n      })\n    }), _jsx(Modal, {\n      visible: toApear,\n      animationType: \"slide\",\n      children: _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(Modal, {\n          animationType: \"slide\",\n          transparent: true,\n          visible: massage,\n          onRequestClose: function onRequestClose() {\n            console.log(\"Modal has been closed.\");\n          },\n          children: _jsxs(View, {\n            style: styles.modal,\n            children: [_jsxs(Text, {\n              style: styles.text,\n              children: [\"\\u05DC\\u05E7\\u05D1\\u05D5\\u05E2 \\u05DC\\u05DA \\u05EA\\u05D5\\u05E8 \\u05DC\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \", selectedDate.getUTCDate(), \"/\", selectedDate.getMonth() + 1, \" \\u05D1\\u05E9\\u05E2\\u05D4 \", choousenHour, \":00 ?\"]\n            }), _jsxs(View, {\n              style: styles.buttons,\n              children: [_jsx(Pressable, {\n                style: [styles.button, styles.buttonOpen],\n                onPress: function onPress() {\n                  return setMassage(!massage);\n                },\n                children: _jsx(Text, {\n                  style: styles.textStyle,\n                  children: \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"\n                })\n              }), _jsx(Pressable, {\n                style: [styles.button, styles.buttonOpen],\n                onPress: function onPress() {\n                  return addQueue();\n                },\n                children: _jsx(Text, {\n                  style: styles.textStyle,\n                  children: \"\\u05DB\\u05DF \\u05D0\\u05E0\\u05D9 \\u05D0\\u05E9\\u05DE\\u05D7 :)\"\n                })\n              })]\n            })]\n          })\n        }), _jsx(CalendarPicker, {\n          startFromMonday: false,\n          weekdays: ['ראשון', 'שני', 'שלישי', 'רביעי', 'חמישי', 'שישי', 'שבת'],\n          months: ['ינואר', 'פברואר', 'מרץ', 'אפריל', 'מאי', 'יוני', 'יולי', 'אוגוסט', 'ספטמבר', 'אוקטובר', 'נובמבר', 'דצמבר'],\n          onDateChange: onDateChange,\n          previousTitle: \"\\u05D4\\u05E7\\u05D5\\u05D3\\u05DD\",\n          nextTitle: \"\\u05D4\\u05D1\\u05D0\"\n        }), _jsxs(View, {\n          style: styles.FLcontainer,\n          children: [_jsx(FlatList, {\n            data: hours,\n            renderItem: function renderItem(_ref) {\n              var item = _ref.item;\n              var flag = false;\n\n              for (var x in catchH) {\n                if (catchH[x] == item.hour) {\n                  flag = true;\n                }\n              }\n\n              if (flag) {\n                item.color = '#FFD9D9';\n                item.iscatched = true;\n              } else {\n                item.color = '#d3ffa3';\n                item.iscatched = false;\n              }\n\n              return _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  if (item.iscatched) {\n                    console.log(\"catched \" + user.id);\n                  } else {\n                    setChoosenHour(item.hour);\n                    setMassage(!massage);\n                  }\n                },\n                children: _jsx(View, {\n                  style: [styles.sectionBox, {\n                    borderColor: item.color,\n                    backgroundColor: item.color\n                  }],\n                  children: _jsxs(Text, {\n                    style: {\n                      textAlign: 'center',\n                      fontSize: 20\n                    },\n                    children: [item.hour, \":00 \"]\n                  })\n                })\n              });\n            }\n          }), _jsx(ActivityIndicator, {\n            style: styles.loading,\n            size: \"large\",\n            color: \"#0000ff\",\n            animating: thinking\n          }), _jsx(TouchableOpacity, {\n            activeOpacity: 0.1,\n            onPress: function onPress() {\n              return visi(!visible);\n            },\n            style: styles.touchi,\n            children: _jsx(FontAwesome, {\n              name: \"arrow-down\",\n              size: 30,\n              color: \"white\"\n            })\n          })]\n        })]\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  FLcontainer: {\n    height: '50%',\n    width: '97%',\n    borderRadius: 5\n  },\n  touchi: {\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 9,\n      height: 9\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 6,\n    elevation: 5,\n    backgroundColor: '#a3c6ff',\n    position: 'relative',\n    top: 30,\n    left: '40%',\n    height: 65,\n    width: 65,\n    borderRadius: 100,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  sectionBox: {\n    borderWidth: 1,\n    borderRadius: 10,\n    justifyContent: 'center',\n    height: 60,\n    marginLeft: 3,\n    marginRight: 3,\n    marginVertical: 2\n  },\n  container: {\n    paddingTop: 0,\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    borderTopLeftRadius: 10,\n    borderTopRightRadius: 10,\n    borderColor: '#0000ff'\n  },\n  loading: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    width: 110,\n    alignItems: 'center',\n    elevation: 8,\n    marginHorizontal: 24,\n    height: 40\n  },\n  buttonOpen: {\n    backgroundColor: \"#d3ffa3\"\n  },\n  modal: {\n    elevation: 30,\n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    backgroundColor: \"#f8f8f8\",\n    height: 200,\n    width: '80%',\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: '#fff',\n    shadowColor: \"black\",\n    shadowOffset: {\n      width: 0,\n      height: 12\n    },\n    shadowOpacity: 0.58,\n    shadowRadius: 16.00,\n    marginTop: '50%',\n    marginLeft: 40\n  },\n  text: {\n    color: '#3f2949',\n    fontSize: 20,\n    marginTop: 10\n  },\n  buttons: {\n    height: 50,\n    backgroundColor: '#f1f1f1',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 85,\n    width: \"100%\",\n    display: 'flex',\n    flexDirection: 'row'\n  }\n});","map":{"version":3,"sources":["C:/Users/hay12/OneDrive/שולחן העבודה/the/client/screens/newQueue.js"],"names":["React","useEffect","useState","useContext","useRef","CalendarPicker","client","FontAwesome","UserContext","Calendar","navigation","thinking","setThinking","indicator","setIndicator","toApear","SetApearence","Date","selectedDate","setSelectedDate","user","visible","setVisible","massage","setMassage","catchH","setCatchH","choousenHour","setChoosenHour","hour","key","color","iscatched","hours","setHours","addQueue","console","log","post","headers","then","response","catch","err","visi","onDateChange","date","a","data","events","display","justifyContent","alignContent","styles","touchi","container","modal","text","getUTCDate","getMonth","buttons","button","buttonOpen","textStyle","FLcontainer","item","flag","x","id","sectionBox","borderColor","backgroundColor","textAlign","fontSize","loading","StyleSheet","create","height","width","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","position","top","left","alignItems","borderWidth","marginLeft","marginRight","marginVertical","paddingTop","flex","borderTopLeftRadius","borderTopRightRadius","right","bottom","padding","marginHorizontal","marginTop","flexDirection"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext, useRef } from 'react';\r\nimport { StyleSheet, View ,Button, Pressable, FlatList, TouchableOpacity, Modal, Text, ActivityIndicator} from 'react-native';\r\nimport CalendarPicker from 'react-native-calendar-picker';\r\nimport client from '../api/client';\r\nimport { FontAwesome } from '@expo/vector-icons';\r\nimport { UserContext } from '../contexts/userContexts';\r\nimport {API, ADMIN_ID} from '@env';\r\n\r\n\r\nexport default function Calendar(navigation) {\r\n    const [thinking, setThinking] = useState(false);\r\n    const [indicator, setIndicator] = useState(false);\r\n    const [toApear, SetApearence] = useState(false);\r\n    const [selectedDate, setSelectedDate] = useState(new Date());\r\n    const {user} = useContext(UserContext);\r\n    const [visible, setVisible] = useState(false);\r\n    const [massage, setMassage] = useState(false);\r\n    const [catchH, setCatchH] = useState([]);\r\n    const [choousenHour, setChoosenHour] = useState(0)\r\n    const [hours, setHours] = useState([\r\n        { hour:9, key: '1', color:'#d3ffa3', iscatched: false},\r\n        { hour:10, key: '2', color:'#d3ffa3', iscatched: false},\r\n        { hour:11, key: '3', color:'#d3ffa3', iscatched: false},\r\n        { hour:12, key: '4', color:'#d3ffa3', iscatched: false},\r\n        { hour:13, key: '11', color:'#d3ffa3', iscatched: false},\r\n        { hour:14, key: '12', color:'#d3ffa3', iscatched: false},\r\n        { hour:15, key: '5', color:'#d3ffa3', iscatched: false},\r\n        { hour:16, key: '6', color:'#d3ffa3', iscatched: false},\r\n        { hour:17, key: '7', color:'#d3ffa3', iscatched: false},\r\n        { hour:18, key: '8', color:'#d3ffa3', iscatched: false},\r\n        { hour:19, key: '9', color:'#d3ffa3', iscatched: false},\r\n        { hour:20, key: '10', color:'#d3ffa3', iscatched: false}\r\n        \r\n    ]);\r\n\r\n    const addQueue = async () => {\r\n        setThinking(true);\r\n        console.log(ADMIN_ID);\r\n        await client.post('/events/addQueue', {'user': user, 'time': selectedDate, 'hour': choousenHour, 'admin': ADMIN_ID} , {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .then((response) => {\r\n            setThinking(false);\r\n            setMassage(false);\r\n            setIndicator(!indicator);\r\n        }).catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    \r\n    function visi(){\r\n        SetApearence(!toApear);\r\n    };\r\n    \r\n    const onDateChange = async (date) => {\r\n        const a = new Date(date);\r\n        setSelectedDate(a); \r\n    }\r\n\r\n    useEffect(async () => {\r\n        setThinking(true);\r\n        await client.post('/events/getDayQueues', {\"date\" : selectedDate}, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((response) => {\r\n            setThinking(false);\r\n            setCatchH(response.data.events);\r\n        }).catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }, [selectedDate, indicator])\r\n\r\n    return (\r\n        <View style={{display: 'flex',justifyContent: 'center', alignContent: 'center'}}>\r\n\r\n            <TouchableOpacity activeOpacity={0.1} onPress={()=> visi(!visible)} style={ styles.touchi }>\r\n                <FontAwesome name=\"plus\" size={32} color=\"white\" />\r\n            </TouchableOpacity>\r\n\r\n            <Modal visible={toApear} animationType=\"slide\">\r\n                \r\n\r\n                <View style={styles.container}>\r\n                    <Modal            \r\n                        animationType = {\"slide\"}  \r\n                        transparent = {true}  \r\n                        visible = {massage}  \r\n                        onRequestClose = {() =>{ console.log(\"Modal has been closed.\") } }>  \r\n\r\n                        {/*All views of Modal*/}  \r\n                        <View style = {styles.modal}>  \r\n                            <Text style = {styles.text}>לקבוע לך תור לתאריך {selectedDate.getUTCDate()}/{selectedDate.getMonth() + 1} בשעה {choousenHour}:00 ?</Text>  \r\n                            <View style={styles.buttons}>\r\n\r\n                                    <Pressable\r\n                                        style={[styles.button, styles.buttonOpen]}\r\n                                        onPress={() => setMassage(!massage)}\r\n                                        >\r\n                                        <Text style={styles.textStyle}>ביטול</Text>\r\n                                    </Pressable>\r\n                                        \r\n                                    <Pressable\r\n                                        style={[styles.button, styles.buttonOpen]}\r\n                                        onPress={() => addQueue()}\r\n                                        >\r\n                                        <Text style={styles.textStyle}>כן אני אשמח :)</Text>\r\n                                    </Pressable>\r\n                                    \r\n                            </View>\r\n                        </View>  \r\n                    </Modal>  \r\n\r\n                    \r\n                    <CalendarPicker\r\n                        startFromMonday={false}\r\n                        weekdays={\r\n                            [\r\n                                'ראשון', \r\n                                'שני', \r\n                                'שלישי', \r\n                                'רביעי', \r\n                                'חמישי', \r\n                                'שישי', \r\n                                'שבת'\r\n                        ]}\r\n\r\n                        months={[\r\n                            'ינואר',\r\n                            'פברואר',\r\n                            'מרץ',\r\n                            'אפריל',\r\n                            'מאי',\r\n                            'יוני',\r\n                            'יולי',\r\n                            'אוגוסט',\r\n                            'ספטמבר',\r\n                            'אוקטובר',\r\n                            'נובמבר',\r\n                            'דצמבר',\r\n                        ]}\r\n                        onDateChange={onDateChange}\r\n                        previousTitle = 'הקודם'\r\n                        nextTitle=\"הבא\"\r\n                    />\r\n                    <View style={styles.FLcontainer}>\r\n                        <FlatList \r\n                            data={hours}\r\n                            renderItem={({item}) => {\r\n                                //check if hour is catched\r\n                                let flag = false;\r\n                                for(let x in catchH){\r\n                                    if(catchH[x] == item.hour){\r\n                                        flag = true;\r\n                                    }\r\n                                }\r\n                                if(flag){\r\n                                        item.color = '#FFD9D9';\r\n                                        item.iscatched= true;\r\n                                    }else{\r\n                                        item.color = '#d3ffa3';\r\n                                        item.iscatched= false;\r\n                                    }\r\n                                    \r\n                                    return  <TouchableOpacity onPress={() => {if(item.iscatched){console.log(\"catched \" + user.id)}else{setChoosenHour(item.hour); setMassage(!massage)}}}>\r\n                                            \r\n                                            <View style={[ styles.sectionBox, {borderColor: item.color, backgroundColor: item.color}] }>\r\n                                            <Text style={{textAlign: 'center', fontSize: 20}}>{item.hour}:00 </Text>\r\n                                            </View>\r\n                                        </TouchableOpacity>\r\n                            }}\r\n                            \r\n                        />\r\n                        <ActivityIndicator\r\n                            style={styles.loading}\r\n                            size=\"large\" \r\n                            color=\"#0000ff\"\r\n                            animating={thinking}\r\n                        />\r\n                        <TouchableOpacity activeOpacity={0.1} onPress={()=> visi(!visible)} style={ styles.touchi}>\r\n                            <FontAwesome name=\"arrow-down\" size={30} color=\"white\" />\r\n                        </TouchableOpacity>\r\n                        \r\n                    </View>\r\n                </View>\r\n            </Modal>\r\n        </View>\r\n\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    FLcontainer: {\r\n        height:'50%', \r\n        width: '97%', \r\n        borderRadius:5,\r\n        \r\n    },\r\n    touchi: {\r\n        shadowColor: '#000',\r\n        shadowOffset: { width: 9, height: 9 },\r\n        shadowOpacity: 0.1,\r\n        shadowRadius: 6,\r\n        elevation: 5, \r\n        backgroundColor:'#a3c6ff', \r\n        position:'relative', \r\n        top: 30, left: '40%', \r\n        height:65,\r\n        width:65,\r\n        borderRadius:100,\r\n        alignItems:'center',\r\n        justifyContent:'center'\r\n    },\r\n    sectionBox: {\r\n        borderWidth: 1,\r\n        borderRadius:10,\r\n        justifyContent:'center',\r\n        height:60,\r\n        marginLeft: 3,\r\n        marginRight: 3,\r\n        marginVertical: 2\r\n    },\r\n  container: {\r\n        paddingTop: 0,\r\n        flex: 1,\r\n        backgroundColor: '#fff',\r\n        alignItems: 'center',\r\n        borderTopLeftRadius: 10,\r\n        borderTopRightRadius: 10,\r\n        borderColor: '#0000ff'\r\n  },\r\n  loading: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        right: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n  },\r\n  button: {\r\n    borderRadius: 20,\r\n    padding: 10,\r\n    width: 110,\r\n    alignItems:'center',  \r\n    elevation: 8,\r\n    marginHorizontal:24,\r\n    height: 40\r\n  },\r\n  buttonOpen: {\r\n    backgroundColor: \"#d3ffa3\",\r\n  },\r\n  modal: {  \r\n        elevation: 30,\r\n        justifyContent: 'center',  \r\n        alignContent: 'center',\r\n        alignItems: 'center',   \r\n        backgroundColor : \"#f8f8f8\",   \r\n        height: 200 ,  \r\n        width: '80%',  \r\n        borderRadius:10,  \r\n        borderWidth: 1,  \r\n        borderColor: '#fff', \r\n        shadowColor: \"black\",\r\n        shadowOffset: {\r\n            width: 0,\r\n            height: 12,\r\n        },\r\n        shadowOpacity: 0.58,\r\n        shadowRadius: 16.00,\r\n        marginTop: '50%',  \r\n        marginLeft: 40,  \r\n   },  \r\n   text: {  \r\n      color: '#3f2949',  \r\n      fontSize: 20,\r\n      marginTop: 10  \r\n   },  \r\n   buttons: {\r\n       height: 50,\r\n       backgroundColor: '#f1f1f1',\r\n       alignItems: 'center',\r\n       justifyContent: 'center',\r\n       marginTop: 85,\r\n       width: \"100%\",\r\n       display: 'flex',\r\n       flexDirection: 'row'\r\n   }\r\n});"]},"metadata":{},"sourceType":"module"}